<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水星 - 太阳的邻居</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/planet.css') }}">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: url('{{ url_for('static', filename='images/bg-stars.png') }}') no-repeat center center fixed;
            background-size: cover;
            font-family: Arial, sans-serif;
            color: white;
        }

        .container {
            text-align: center;
            padding: 20px;
        }

        h1 {
            margin-top: 20px;
        }

        a {
            color: cyan;
            text-decoration: none;
            font-size: 16px;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Popup styling */
        .popup {
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 10px;
            width: 80%;
            max-width: 400px;
            text-align: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .popup.show {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .popup h2 {
            margin-top: 0;
        }

        .popup p {
            margin-bottom: 20px;
        }

        .popup button {
            background-color: cyan;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
        }

        .popup button:hover {
            background-color: darkcyan;
        }

        /* Overlay for dimming background */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Earth</h1>

        <!-- 加载3D模型 -->
        <model-viewer id="earth-viewer" src="{{ url_for('static', filename='models/earth with asteroid(18).glb') }}" alt="地球"
                      camera-controls auto-rotate ar
                      environment-image="neutral" exposure="1"
                      shadow-intensity="1"
                      style="width: 100%; height: 700px;">
        </model-viewer>

        <!-- 弹出按钮（可选） -->
        <button id="open-popup" style="display: none;">Show Planet Details</button>

        <!-- 返回首页链接 -->
        <br><br>
        <a href="{{ url_for('home') }}">Return To Home Page</a>
    </div>

    <!-- Popup overlay -->
    <div id="overlay" class="overlay"></div>

    <!-- Popup for planet description -->
    <div id="popup" class="popup">
      <h2 id="popup-title">Earth - Our Hometown</h2>
      <p id="popup-content">Earth is the only known planet to support life. Its surface is 71% covered by water, and it has a temperate climate, an 
        atmosphere rich in oxygen and nitrogen, and a magnetic field that protects it from solar and cosmic radiation. Earth’s 
        position in the habitable zone allows for the presence of liquid water, vital for life.<br><br>

        Average Distance: 149.6 million km (1 AU)<br><br>

        Orbital Period: 365.25 Earth days
    </p>
      <div class="button-container">
          <button id="close-popup">Close</button>
          <button id="more-details">More Details</button>
      </div>
    </div>

    <script>
        const earthViewer = document.getElementById('earth-viewer');
        const openPopupButton = document.getElementById('open-popup');
        const closePopupButton = document.getElementById('close-popup');
        const moreDetailsButton = document.getElementById('more-details');
        const popup = document.getElementById('popup');
        const overlay = document.getElementById('overlay');
        const popupTitle = document.getElementById('popup-title');
        const popupContent = document.getElementById('popup-content');

        // 点击地球模型时，显示弹窗
        earthViewer.addEventListener('click', function() {
            popupTitle.innerHTML = "Planets, Near-Earth Asteroids, Near-Earth Comets, Potentially Hazardous Asteroids";
            popupContent.innerHTML = `
                <strong>Planets:</strong> Large celestial bodies orbiting a star.<br><br>
                <strong>Near-Earth Asteroids (NEAs):</strong> These are asteroids that have orbits bringing them close to Earth's orbit. Their perihelion distance is less than 1.3 AU from the Sun. NEAs are of interest for both scientific research and planetary defense due to their potential proximity to Earth.<br><br>
                <strong>Near-Earth Comets (NECs):</strong> These are comets with orbits that bring them close to Earth. Unlike asteroids, comets typically have a mixture of ice and dust, and when they approach the Sun, they form tails or comas due to the sublimation of their ice.<br><br>
                <strong>Potentially Hazardous Asteroids (PHAs):</strong> These are a special subset of NEAs. PHAs have orbits that come within 0.05 AU of Earth and are large enough (usually over 140 meters in diameter) to cause significant damage if they impact Earth. They are closely monitored for any impact threat.<br><br>
            `;
            popup.classList.add('show');
            overlay.classList.add('show');
        });

        // 关闭弹窗
        closePopupButton.addEventListener('click', function() {
            popup.classList.remove('show');
            overlay.classList.remove('show');
        });

        // 点击遮罩层关闭弹窗
        overlay.addEventListener('click', function() {
            popup.classList.remove('show');
            overlay.classList.remove('show');
        });

        // 点击 "More Details" 按钮，跳转到新页面
        moreDetailsButton.addEventListener('click', function() {
            window.location.href = "{{ url_for('earthasteroids') }}";
        });
    </script>
</body>
</html>
